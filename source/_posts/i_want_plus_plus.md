---
title:  我想要加加
date: 2017-09-05 05:50:00
categories: 技术博文
tags: [language c++]
---

经常听到一句话：
> 编程语言不重要，重要的是语言背后的编程思想。

这句话在某种程度上是正确的，至少在某个层面是正确的。只有达到了一定的层次，特别是在职位上达到了一定的层次，脱离了具体繁琐的事务，才能说的出来这样的话，就像：

> 财富不重要，重要的财富后面赚钱的思想。

这种话，必须是已经具有财富的人，才会说得出。而且我相信这种话说出也是口是心非，忽悠后来人的。真的有钱人一定知道，从头开始积累的财富有多重要。体会过做生意时缺少资金苦苦借钱到处碰壁有多惨。有钱人开了公司，有了钱，有了人，就好了伤疤忘了痛。

<!-- more -->

对于在编程一线的程序员，语言就是我们最重要的工具。我们用它和计算机这个nerd交流。虽然讨论什么是最好的语言非常幼稚，但是讨论具体情境下，什么是最适合的语言，绝对是有必要的。

公司的产品ADAS、无人机视觉，基本上围绕图像处理算法。目前这种应用层方面的工作大多数都是用C++和python开发的。产品要在ARM上跑，python不太适合，C++应该是最合适的。但现在在工作使用的语言却都是C。在“语言不重要”这样的思想洗脑下，我也一直没觉得有什么。但是现在研发任务越来越重，产品也越来越走向正规，越来越觉得有些心结，不吐不快。

就我直接使用经历来说，C++开发相比C开发，这几点的提升的肯定的：

### 丰富而标准的类库

这里有两个标准：“丰富”和“标准”。

现在自己工作中20%的时间基本在重复造各种轮子：文件操作、容器、基础算法。我们是小公司，不比互联网大公司有深厚的积累，所以当我发现我需要某个工具而目前系统中没有时，就得重新造轮子。我现在感觉到：现在我能用到强大的C++标准库，我开发速度就会快很多，更不用说第三方库了，让我用python做算法研发，那简直就不能太爽。这说的是丰富。

如果幸运的话，目前系统里已经有我需要的工具，我还需要花一定时间弄清使用方法。输入参数如何，返回什么含义，何时申请释放内存。最糟糕的是，因为手工打造的轮子缺少测试，也缺少文档，碰到调用不当或者本身轮子就不够健壮，掉到坑里，要花去很长的时间。这些工具，每个人都要花时间来摸索。比如我们新招聘一个员工在目前系统上开发，就算他是一个经验丰富的C/C++程序员，熟悉STL和常见的开源库，他的经验也派不上用场，还是得摸索如何使用我们制造的轮子。这说的是标准。

放弃**强大、标准、久经考验**的标准库，自己造各种轮子，这绝对是得不偿失。老实说，造轮子的过程中，我们的编程水平得到了很大的提升。我最近实现了一个类似python的os.path的文件操作库，现在C的字符串使用非常之熟练，指针说定位到哪里就定位到哪里。但这些重复造轮子，对于公司是一种损失。这些时间用在业务开发上，肯定会更有收获。

### 面向对象模块清晰

使用C，我们没法使用面向对象，OO的所有优点：封装、继承、多态，我们都没法享受到。比如以下场景：要实现一个功能函数，只因为参数类型从int换成float，就要重新写一个函数，把代码重新复制一遍。或者相似的功能，只因为少许不同，就要把建立上下文的代码重新写一遍。

最让我无法忍受的，是没有C++的封装。看着每个函数长长的参数列表，有些参数甚至在几乎所有的函数中都调用了一次，就有些强迫症发作，想把他们都隐藏起来。

对比C++的代码清晰的模块，每个方法很少很少的参数，良好的代码复用，阅读和维护都方便，心里就有些不平衡。

如果让我认同使用C开发，必须要有说服我的理由。但目前我只是听到：未来系统要部署在实时操作系统上，内存之类的都要自己管理，没法使用C++这样的理由。但RTOS也支持使用C++，实在不懂为什么一定要C开发。

如果有机会，我会和leader沟通我的想法。如果公司的确是一些历史原因，或者长远打算，暂时没法选择我认为是最适合的语言，也只能努力说服自己，“财富不重要，重要的是会赚钱”的境界。虽然自己明白没钱的时候赚钱很难，但至少搬砖伐木造轮子，能强身健体，不是吗？


