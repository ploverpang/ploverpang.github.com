---
title: 工业相机传感器与接口
date: 2015-08-18 00:00:00
categories: 技术博文
author: PangBo
tags: [CV] 
---

> **导言：** 这篇博客记录自己最近对工业相机传感器和常见接口的学习记录。之前自己都只关注图像处理和更为高级的计算机视觉的应用，对图像是如何生成的，特别是与图像生成息息相关的相机、镜头、光源等硬件设备知之甚少。有时项目需要，想去厂商买合适的设备，都不知道该如何选。也许如何成像对于学术研究来说不重要，但对实际项目却至关重要，特别是机器视觉中的应用。这篇博客主要参考《***机器视觉算法与应用***》这本书和前两天参加Point Grey成像研讨会的一些讲解。

<!-- more -->

##相机

工业相机最重要的划分就是根据图像传感器分为**CCD**和**CMOS**两大类。CCD相机和CMOS相机的在感光方面原理都是相同的：将光信号转换成电信号输出。区别在于：CCD使用外置芯片来进行A/D转换，而CMOS为内置电路转换。这一不同点造成了二者在读取速度、成像质量等方面的差别。

CCD使用移位寄存器和外置芯片，进行串行A/D转换，因此处理速度慢。但因为所有像素使用相同的AD转换器，成像噪声小。CCD另外一个优点在于灵敏度比CMOS高。

CMOS采用有源像素传感器，光电传感器附近都有相应的电路直接将光能量转换成电压信号。数模转换在每个传感器列中，即有多个数模转换器对模拟信号转换为数字信号。CMOS可以分为卷帘快门和全局快门，卷帘快门会产生拖尾现象，全局快门可以消除这个现象。CMOS的优势在于帧率高，制造成本低，功耗也小于CCD，但因为使用不同电路转换光能量，不同电路之间不可能完全相同，所以相比CCD会多一些噪点。

随着CMOS制造水平的不断提高，CMOS的成像质量与CCD的差距在逐步缩小。

##相机接口

相机接口可以分为：火线(IEEE 1394)、USB2.0、GigE(千兆以太网)、USB3.0、Camera Link等。

火线最初由苹果在1995年提出，它采用6针接插线，两对双绞线传输信号，一根电缆用于电源，一个电缆连接地线。火线接口是比较古老的接口，但由于视觉应用需要向后兼容，许多企业仍然需要火线接口的相机。

GigE接口采用以太网传输，优势是电缆长度长。2005年通过GigE Vision协议，机器视觉应用需要向以太网发布枚举的查询命令，收集摄像机的响应，数据通过以太网协议传输。

USB2.0的优势是低成本，接口支持设备多。但因为这个协议本身是面向消费级产品的，没有行业标准，很难当做一种稳定的接口，比如会有图像撕裂的现象，也没有提供紧固螺栓，电缆容易意外脱落。还有一个缺点在于：USB2.0是轮询总线，使用CPU率高。

USB3.0是目前发展最快的相机接口，其优势在于：

 - 很高的带宽，带宽可达440M
 - 改善的系统构架，可以使CPU使用率降低很多
 - 方便的接口，现在一般PC都会带有USB3.0接口
 - 高可靠性，具有固定螺栓的线缆
 - 系统成本低
 - 通用的相机标准（USB3 Vision标准）

USB3协议支持4.5W的功率输出，相比USB2.0的2.5W功率提高了许多，有更多的相机可以选择无需外部供电而直接使用。

USB3.0采用异步信号方式，相比USB2.0的轮询机制，降低了系统开销和CPU的使用率。USB3.0采用DMA，无需CPU中断。以太网和USB2.0都是不支持DMA的。

值得注意的是，USB3.0无法做到长距离传输，一般推荐的电缆长度在5米以内。

目前市面上的新型相机，比如微软的Kinect2、Intel的RealSense，都是使用USB3.0的接口。相信这也将变成一种趋势。
